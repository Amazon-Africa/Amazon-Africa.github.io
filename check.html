<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Amazon Africa - Checking Order</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f3f4f6;
      text-align: center;
      padding-top: 100px;
    }
    h2 { color: #111827; }
    p { color: #6b7280; }
  </style>
</head>
<body>
  <h2>Checking your order...</h2>
  <p>Please wait while we confirm your tracking number.</p>

  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

    const SUPABASE_URL = "https://uareyvicfwneodbzjgwo.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVhcmV5dmljZnduZW9kYnpqZ3dvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MTEzODksImV4cCI6MjA3NzA4NzM4OX0.L_o53GwxnN3q3XMhq1X9VtFNRbydWmU_qz01eTuyO8I"; // replace with real anon key
    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const trackId = localStorage.getItem("trackId");

    async function checkOrder() {
   // const input = localStorage.getItem("trackId");
   // const trackId = input.trim()

    // 1️⃣ If empty
    if (!trackId) {
      document.body.innerHTML = "<b>Enter tracking ID</b>"
      return
    }

    // 2️⃣ Search the orders table
    const { data, error } = await supabase
      .from('orders') // lowercase table name
      .select('*')
      .eq('track_id', trackId)
      .maybeSingle()

    // 3️⃣ If not found or error
    if (error || !data) {
      console.error(error)
      document.body.innerHTML = "<b>YOU HAVE NOT MADE ANY ORDERS.</b>"
      return
    }

    // 4️⃣ Save and redirect
    localStorage.setItem('trackId', trackId)
    window.location.href = 'exist.html'
    
    }

    checkOrder();
  </script>
</body>
  </html>
  
