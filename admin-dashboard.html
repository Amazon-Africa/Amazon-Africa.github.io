<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Amazon Africa - Admin Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; margin: 0; padding: 20px; }
    h1 { color: #333; }
    .section { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    input, select, button {
      margin: 5px 0;
      padding: 8px;
      width: 100%;
      max-width: 320px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 15px;
    }
    button { background: #007bff; color: white; border: none; cursor: pointer; }
    button:hover { background: #0056b3; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background: #007bff; color: white; }
  </style>
</head>
<body>
  <h1>Amazon Africa Admin Dashboard</h1>

  <!-- ADD NEW ORDER -->
  <div class="section">
    <h2>Add New Order</h2>
    <input type="text" id="sender_name" placeholder="Sender Name">
    <input type="text" id="sender_country" placeholder="Sender Country">
    <input type="text" id="receiver_name" placeholder="Receiver Name">
    <input type="text" id="country" placeholder="Receiver Country">
    <input type="text" id="track_id" placeholder="Tracking ID">
    <input type="text" id="goods" placeholder="Goods Description">
    <input type="number" id="amount" placeholder="Amount">
    <select id="status">
      <option value="pending">Pending</option>
      <option value="in transit">In Transit</option>
      <option value="delivered">Delivered</option>
    </select>
    <button id="addOrder">Add Order</button>
  </div>

  <!-- EDIT ORDER STATUS -->
  <div class="section">
    <h2>Edit Status</h2>
    <input type="text" id="track_id_edit" placeholder="Enter Tracking ID">
    <select id="new_status">
      <option value="pending">Pending</option>
      <option value="in transit">In Transit</option>
      <option value="delivered">Delivered</option>
    </select>
    <button id="updateStatus">Update Status</button>
  </div>

  <!-- ORDERS TABLE -->
  <div class="section">
    <h2>Orders</h2>
    <table id="ordersTable">
      <thead>
        <tr>
          <th>ID</th>
          <th>Sender</th>
          <th>Receiver</th>
          <th>Country</th>
          <th>Track ID</th>
          <th>Goods</th>
          <th>Amount</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody id="ordersBody"></tbody>
    </table>
  </div>

  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

    const supabaseUrl = "https://uareyvicfwneodbzjgwo.supabase.co";
    const supabaseKey = "YOUR_SUPABASE_KEY"; // Replace with your actual key
    const supabase = createClient(supabaseUrl, supabaseKey);

    const addOrderBtn = document.getElementById("addOrder");
    const updateStatusBtn = document.getElementById("updateStatus");

    // ‚úÖ Add new order
    addOrderBtn.addEventListener("click", async () => {
      const orderData = {
        sender_name: sender_name.value.trim(),
        sender_country: sender_country.value.trim(),
        receiver_name: receiver_name.value.trim(),
        country: country.value.trim(),
        track_id: track_id.value.trim(),
        goods: goods.value.trim(),
        amount: parseFloat(amount.value),
        status: status.value,
      };

      console.log("üü¶ Attempting to insert order:", orderData);

      const { data, error } = await supabase.from("orders").insert([orderData]);

      if (error) {
        console.error("‚ùå Error adding order:", error);
        alert("‚ùå Error adding order: " + error.message);
      } else {
        console.log("‚úÖ Order added:", data);
        alert("‚úÖ Order added successfully!");
        loadOrders();
      }
    });

    // ‚úÖ Update order status
    updateStatusBtn.addEventListener("click", async () => {
      const trackId = track_id_edit.value.trim();
      const newStatus = new_status.value;

      if (!trackId) return alert("‚ö†Ô∏è Please enter a tracking ID");

      console.log(`üü® Updating order with Track ID: ${trackId} ‚Üí ${newStatus}`);

      const { error } = await supabase
        .from("orders")
        .update({ status: newStatus })
        .eq("track_id", trackId);

      if (error) {
        console.error("‚ùå Error updating status:", error);
        alert("‚ùå Error updating status: " + error.message);
      } else {
        console.log(`‚úÖ Status updated to ${newStatus} for ${trackId}`);
        alert
    
